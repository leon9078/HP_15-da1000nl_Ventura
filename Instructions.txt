Prerequirements:
- macOS environment
- empty 16+ GB USB flash drive for macOS Ventura
- empty 2+ GB USB flash drive for Arch Linux

In a macOS environment:
- Download macOS Ventura full installer using "installinstallmacos.py" (https://github.com/munki/macadmin-scripts)
- Download GPT fdisk (gdisk) tool
- Download latest Arch Linux ISO

% cd ~/Music
% xcode-select --install
% git clone --depth 1 https://github.com/munki/macadmin-scripts.git
% cd macadmin-scripts
% pip3 install xattr
% sudo python3 installinstallmacos.py
[type the number of the macOS version you want to install]
% sudo chown -R $(whoami) *
% cp Install_macOS_13.7.8-22H730.dmg ..
% hdiutil attach -mountpoint mnt -nobrowse -noverify Install_macOS_13.7.8-22H730.dmg
% cp -R mnt/Install\ macOS\ Ventura.app /Applications/
% sudo sync
% hdiutil detach mnt
% cd ..
% rm -rf macadmin-scripts

Download GPT fdisk (gdisk) tool

% curl -L -o gdisk-1.0.10.pkg https://sourceforge.net/projects/gptfdisk/files/gptfdisk/1.0.10/gdisk-binaries/gdisk-1.0.10.pkg/download
% pkgutil --expand-full gdisk-1.0.10.pkg gdisk-1.0.10/
% mv gdisk-1.0.10/Payload/usr/local/bin/gdisk .
% rm -r gdisk-1.0.10*

Insert an empty 16+ GB USB flash drive

% printf '\33c\e[3J' && diskutil list
% sudo ./gdisk /dev/rdiskX
n
[Enter, accept default Partition number]
[Enter, accept default First sector]
+600M
ef00
c
[empty name (PARTLABEL)]
n
[Enter, accept default Partition number]
[Enter, accept default First sector]
[Enter, accept default Last sector]
[Enter, accept default AF00 Hex code]
c
2
[empty name (PARTLABEL)]
x
h
v

[The output MUST say "No problems found." and "available in 2 segments, the largest of which is 2014 [...] in size."]
[2014 sectors MUST BE the MINIMUM largest segment, so it COULD BE a larger number]

w
y

% sudo newfs_msdos -v EFI /dev/rdiskXs1
% curl -LJO https://github.com/leon9078/HP_15-da1000nl_Ventura/archive/refs/heads/master.zip
% unzip -q HP_15-da1000nl_Ventura-master.zip
% sudo diskutil mount nobrowse /dev/diskXs1
% cp -R HP_15-da1000nl_Ventura-master/EFI_USB /Volumes/EFI/EFI
% sudo sync
% diskutil umount /dev/diskXs1
% rm -r HP_15-da1000nl_Ventura-master
% diskutil eject /dev/diskX

Unplug USB flash drive

Reboot macOS into Recovery mode

Click on Apple logo > Riavvia
Press and hold Win+R (equivalent Cmd+R Apple shortcut combo)
It will take a while, then it will load into Recovery mode!

Type Cmd+Shift+T to quickly enter Terminal

Plug again the 16+ USB flash drive

# diskutil list
# newfs_hfs -J -v Ventura_Installer /dev/rdiskXs2
# diskutil mount nobrowse /dev/diskXs2
# /Volumes/Macintosh\ HD/Applications/Install\ macOS\ Ventura.app/Contents/Resources/createinstallmedia --volume /Volumes/Ventura_Installer --nointeraction
# sync
# hdiutil detach /Volumes/Shared\ Support
# diskutil umount /dev/diskXs2
# diskutil eject /dev/diskX

Unplug macOS Ventura USB drive

Click on Apple logo > Riavvia

Login, then download Arch Linux installer ISO from their official website

% curl -O https://it.mirrors.cicku.me/archlinux/iso/2026.01.01/{archlinux-2026.01.01-x86_64.iso,sha256sums.txt}
% shasum -a 256 archlinux-2026.01.01-x86_64.iso | grep --color=yes "<paste SHA-256 of archlinux-2026.01.01.iso>"

Insert an empty 2+ GB USB flash drive

% printf '\33c\e[3J' && diskutil list

Get the size of the Arch .iso and add 100 MiB in order to create a partition where the file system will have enough free space

% echo +$(( $(wc -c < archlinux-2026.01.01-x86_64.iso) / 2 ** 20 + 100 ))M

% sudo ./gdisk /dev/rdiskX
n
[Enter, accept default Partition number]
[Enter, accept default First sector]
[output of echo command]
ef00
c
[empty name (PARTLABEL)]
v

[The output MUST say "No problems found." and "available in 2 segments, the largest of which is 2014 [...] in size."]
[2014 sectors MUST BE the MINIMUM largest segment, so it COULD BE a larger number]

w
y

% dd if=archlinux-2026.01.01-x86_64.iso bs=1 skip=$(( 0x8028 )) count=32 status=none | perl -pe 's/[ ]+$/\n/'
% sudo newfs_msdos -v ARCH_202601 /dev/rdiskXs1
% sudo diskutil mount nobrowse /dev/diskXs1
% bsdtar -x -v --exclude EFI/BOOT/BOOTIA32.EFI --exclude boot/syslinux/ --exclude shellia32.efi -f archlinux-2026.01.01-x86_64.iso -C /Volumes/ARCH_202601
% perl -i -pe 's/(timeout).*/$1 5/;s/(beep).*/$1 off/' /Volumes/ARCH_202601/loader/loader.conf
% mv /Volumes/ARCH_202601/EFI/BOOT/{,ARCH-}BOOTx64.EFI
% cp /Volumes/ARCH_202601/shellx64.efi /Volumes/ARCH_202601/EFI/BOOT/BOOTx64.EFI
% curl -LJ -o /Volumes/ARCH_202601/EFI/BOOT/BIOS_settings.nsh https://github.com/leon9078/HP_15-da1000nl_Ventura/raw/refs/heads/master/BIOS/BIOS_settings.nsh
% curl -LJ -o /Volumes/ARCH_202601/EFI/TOOLS/uvt.efi --create-dirs https://github.com/leon9078/UefiVarTool/releases/download/1.0.0/uvt.efi
% printf '@echo -off\r\nARCH-BOOTx64.EFI\r\n' | perl -0777pe 's/(.)/$1\x00/gs;s/^/\xFF\xFE/' > /Volumes/ARCH_202601/EFI/BOOT/startup.nsh
% sudo sync
% diskutil umount /dev/diskXs1
% diskutil eject /dev/diskX

Unplug Arch USB drive

On the target laptop, turn it off
Press and hold Win+V keys
Press and hold Power button for 3 seconds WHILE holding Win+V combo
Continuing holding Win+V until we get the CMOS reset screen
Laptop will reboot several times


When we see "Boot device not found" message, plug Arch USB drive to the target laptop
Ctrl-Alt-Del, press ESC repeatedly, F9, Arch USB, at UEFI Shell press ESC key (within 5 seconds) to skip "startup.nsh" (which will otherwise load Arch systemd-boot)
At UEFI Shell prompt, we can simply type "bios_settings". UEFI Shell is case-insensitive, so we can type "bios_settings" instead of "BIOS_settings"
Also we can omit typing the script extension ".nsh"

Shell> bios_settings

After reboot, quickly unplug USB flash drive, wait for "Boot device not found" message. Plug again the Arch USB flash drive and reboot (Ctrl-Alt-Del).
Again, at UEFI Shell press ESC key (within 5 seconds).

Go to this website on another device: https://time.is/UTC

Shell> date <month>/<day>/<year>
Shell> time <hours>:<minutes>:<seconds>
Shell> reset -s

Unplug Arch USB installer, attach empty NVMe SSD

Boot the PC, "Boot device not found", insert Arch USB installer.

Make sure Ethernet cable or Android USB Tethering is disconnected!

Ctrl-Alt-Del, F9, USB, UEFI Shell, Arch systemd-boot, "e", "module_blacklist=b43,b43legacy,bcm43xx,bcma,brcm80211,brcmfmac,brcmsmac,ssb pcie_port_pm=off psmouse.synaptics_intertouch=1 quiet loglevel=0"

# systemctl stop reflector systemd-{networkd-wait-online,timesyncd}
# systemctl disable reflector systemd-{networkd-wait-online,timesyncd}
# lsblk -po +FSTYPE,LABEL,PARTLABEL,PARTTYPENAME
# gdisk /dev/nvme0nX
n
[Enter, accept default Partition number]
[Enter, accept default First sector]
+600M
ef00
c
[empty name (PARTLABEL)]
n
[Enter, accept default Partition number]
[Enter, accept default First sector]
[Enter, accept default Last sector]
af00
c
2
[empty name (PARTLABEL)]
p
n
[Enter, accept default Partition number]
[value of End sector of partition number 2 + 1 (sector)]
[Enter, accept default Last sector]
0700
c
3
[empty name (PARTLABEL)]
v

[The output MUST say "Caution: Partition 3 doesn't end on a 2048-sector boundary. This may result in problems with some disk encryption tools."

Don't worry, we will delete this partition after the end of macOS installation!

Also, we MUST have this text "No problems found." and "available in 1 segments, the largest of which is 2014 [...] in size."]

w
y

# systemctl poweroff

Unplug Arch USB installer, insert macOS Ventura USB installer.
Boot, F9, USB, "Install macOS Ventura (external)" will be automatically selected and booted in 5 seconds.
Type Cmd+Shift+T to quickly enter Terminal

# diskutil list
# newfs_hfs -J -v 'Macintosh HD' /dev/rdiskXs2
# diskutil mount nobrowse diskXs2

Cmd+Q to quit Terminal

Install macOS Ventura to Macintosh HD.

There will be multiple reboots in the middle.
Reboot -> "macOS Installer" -> Reboot -> "macOS Installer" -> Reboot -> "Macintosh HD"
When you see "Macintosh HD" inside OpenCore Boot Menu, select again "Install macOS Ventura (external)"

Type Cmd+Shift+T to quickly enter Terminal

# diskutil list
# newfs_msdos -v EFI /dev/rdiskXs1

Plug Ethernet cable now!

# curl -LJO https://github.com/leon9078/HP_15-da1000nl_Ventura/archive/refs/heads/master.zip

Unplug Ethernet cable!

# unzip -q HP_15-da1000nl_Ventura-master.zip
# diskutil mount nobrowse /dev/diskXs1
# cp -R HP_15-da1000nl_Ventura-master/EFI_Target /Volumes/EFI/EFI
# sync
# diskutil umount /dev/diskXs1

Cmd+Q to quit Terminal

Click on Apple logo > Spegni

Unplug macOS USB installer, plug Arch installer one more time.

Boot, F9, USB, UEFI Shell, Arch systemd-boot, "e", "module_blacklist=b43,b43legacy,bcm43xx,bcma,brcm80211,brcmfmac,brcmsmac,ssb pcie_port_pm=off psmouse.synaptics_intertouch=1 quiet loglevel=0"

# lsblk -po +FSTYPE,LABEL,PARTLABEL,PARTTYPENAME
# gdisk /dev/nvme0nX
d
3
x
h
v

[The output MUST say "No problems found." and "available in 2 segments, the largest of which is 2014 [...] in size."]
[2014 sectors MUST BE the MINIMUM largest segment, so it COULD BE a larger number]

w
y

# systemctl poweroff

Unplug Arch USB drive.

Make sure Ethernet is disconnected during macOS first setup!

Power on the PC, finish macOS install. Done!





Post-install!

In macOS open Terminal once

% touch .{vim,zsh}rc

Cmq+Q to quit Terminal

Reboot macOS into Recovery mode

Click on Apple logo > Riavvia
After initial InsydeH20 screen, press and hold Win+R (equivalent Cmd+R Apple shortcut combo)
It will take a while, then it will load into Recovery mode!

Type Cmd+Shift+T to quickly enter Terminal

# mount | grep " /Volumes/"
# tee < /Volumes/Macintosh\ HD/etc/zshrc > /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/.zshrc
# perl -i -pe 's/(^PS1=).*/$1"%~ %# "/' /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/.zshrc
# chmod 600 /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/.zshrc
# echo "set ruler" > /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/.vimrc
# chmod 600 /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/.vimrc



Now manually set some Apple Terminal preferences to my taste in the target OS!

# plutil -convert xml1 /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/Library/Preferences/com.apple.Terminal.plist



Now at this point it's better to open a new Terminal window and copy/paste the following long commands!

Cmd+N

# printf '\33c\e[3J' && curl -Ls https://github.com/leon9078/HP_15-da1000nl_Ventura/raw/refs/heads/master/Instructions.txt | tail -n 107

Let's first handle "Pro" and "Novel" profiles, which already have "ShowWindowSettingsNameInTitle" set, we just need to set it as true!

Pro:

# printf '\33c\e[3J' && /usr/libexec/PlistBuddy \
-c "Add 'Window Settings:Pro:ShowActiveProcessArgumentsInTitle' bool" \
-c "Add 'Window Settings:Pro:ShowActiveProcessArgumentsInTabTitle' bool" \
-c "Set 'Window Settings:Pro:ShowWindowSettingsNameInTitle' 1" \
-c "Add 'Window Settings:Pro:ShowRepresentedURLPathInTitle' bool 1" /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/Library/Preferences/com.apple.Terminal.plist

Novel:

# printf '\33c\e[3J' && /usr/libexec/PlistBuddy \
-c "Add 'Window Settings:Novel:ShowActiveProcessArgumentsInTitle' bool" \
-c "Add 'Window Settings:Novel:ShowActiveProcessArgumentsInTabTitle' bool" \
-c "Set 'Window Settings:Novel:ShowWindowSettingsNameInTitle' 1" \
-c "Add 'Window Settings:Novel:ShowRepresentedURLPathInTitle' bool 1" /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/Library/Preferences/com.apple.Terminal.plist





Now start covering all other profiles!

Basic:

# printf '\33c\e[3J' && /usr/libexec/PlistBuddy \
-c "Add 'Window Settings:Basic:ShowActiveProcessArgumentsInTitle' bool" \
-c "Add 'Window Settings:Basic:ShowActiveProcessArgumentsInTabTitle' bool" \
-c "Add 'Window Settings:Basic:ShowWindowSettingsNameInTitle' bool 1" \
-c "Add 'Window Settings:Basic:ShowRepresentedURLPathInTitle' bool 1" /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/Library/Preferences/com.apple.Terminal.plist

Grass:

# printf '\33c\e[3J' && /usr/libexec/PlistBuddy \
-c "Add 'Window Settings:Grass:ShowActiveProcessArgumentsInTitle' bool" \
-c "Add 'Window Settings:Grass:ShowActiveProcessArgumentsInTabTitle' bool" \
-c "Add 'Window Settings:Grass:ShowWindowSettingsNameInTitle' bool 1" \
-c "Add 'Window Settings:Grass:ShowRepresentedURLPathInTitle' bool 1" /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/Library/Preferences/com.apple.Terminal.plist

Ocean:

# printf '\33c\e[3J' && /usr/libexec/PlistBuddy \
-c "Add 'Window Settings:Ocean:ShowActiveProcessArgumentsInTitle' bool" \
-c "Add 'Window Settings:Ocean:ShowActiveProcessArgumentsInTabTitle' bool" \
-c "Add 'Window Settings:Ocean:ShowWindowSettingsNameInTitle' bool 1" \
-c "Add 'Window Settings:Ocean:ShowRepresentedURLPathInTitle' bool 1" /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/Library/Preferences/com.apple.Terminal.plist

Homebrew:

# printf '\33c\e[3J' && /usr/libexec/PlistBuddy \
-c "Add 'Window Settings:Homebrew:ShowActiveProcessArgumentsInTitle' bool" \
-c "Add 'Window Settings:Homebrew:ShowActiveProcessArgumentsInTabTitle' bool" \
-c "Add 'Window Settings:Homebrew:ShowWindowSettingsNameInTitle' bool 1" \
-c "Add 'Window Settings:Homebrew:ShowRepresentedURLPathInTitle' bool 1" /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/Library/Preferences/com.apple.Terminal.plist

Man Page:

# printf '\33c\e[3J' && /usr/libexec/PlistBuddy \
-c "Add 'Window Settings:Man Page:ShowActiveProcessArgumentsInTitle' bool" \
-c "Add 'Window Settings:Man Page:ShowActiveProcessArgumentsInTabTitle' bool" \
-c "Add 'Window Settings:Man Page:ShowWindowSettingsNameInTitle' bool 1" \
-c "Add 'Window Settings:Man Page:ShowRepresentedURLPathInTitle' bool 1" /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/Library/Preferences/com.apple.Terminal.plist

Red Sands:

# printf '\33c\e[3J' && /usr/libexec/PlistBuddy \
-c "Add 'Window Settings:Red Sands:ShowActiveProcessArgumentsInTitle' bool" \
-c "Add 'Window Settings:Red Sands:ShowActiveProcessArgumentsInTabTitle' bool" \
-c "Add 'Window Settings:Red Sands:ShowWindowSettingsNameInTitle' bool 1" \
-c "Add 'Window Settings:Red Sands:ShowRepresentedURLPathInTitle' bool 1" /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/Library/Preferences/com.apple.Terminal.plist

Solid Colors:

# printf '\33c\e[3J' && /usr/libexec/PlistBuddy \
-c "Add 'Window Settings:Solid Colors:ShowActiveProcessArgumentsInTitle' bool" \
-c "Add 'Window Settings:Solid Colors:ShowActiveProcessArgumentsInTabTitle' bool" \
-c "Add 'Window Settings:Solid Colors:ShowWindowSettingsNameInTitle' bool 1" \
-c "Add 'Window Settings:Solid Colors:ShowRepresentedURLPathInTitle' bool 1" /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/Library/Preferences/com.apple.Terminal.plist

Silver Aerogel:

# printf '\33c\e[3J' && /usr/libexec/PlistBuddy \
-c "Add 'Window Settings:Silver Aerogel:ShowActiveProcessArgumentsInTitle' bool" \
-c "Add 'Window Settings:Silver Aerogel:ShowActiveProcessArgumentsInTabTitle' bool" \
-c "Add 'Window Settings:Silver Aerogel:ShowWindowSettingsNameInTitle' bool 1" \
-c "Add 'Window Settings:Silver Aerogel:ShowRepresentedURLPathInTitle' bool 1" /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/Library/Preferences/com.apple.Terminal.plist

# plutil -convert binary1 /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/Library/Preferences/com.apple.Terminal.plist
# rm -r /Volumes/Macintosh\ HD\ -\ Dati/Users/leonardo/.zsh_*

Cmq+Q to quit Terminal

Click on Apple Logo > Riavvia

Done Post Install!





Bonus Terminal commands!

- Get a list of Sleep/Wake cycles in the current boot session

% printf '\33c\e[3J' && log show --last boot --style syslog --predicate 'process == "powerd" AND category == "sleepWake" AND composedMessage CONTAINS "Entering " OR composedMessage CONTAINS "Wake from "' >&2 >/dev/null
